<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Go基础系列：9. 内置集合 - map | PrintLove</title><meta name=keywords content="go,map"><meta name=description content="go语言map的创建、遍历、删除键等知识讲解"><meta name=author content="Evan Miao"><link rel=canonical href=https://www.gby.ai/golang-map/><link crossorigin=anonymous href=/assets/css/stylesheet.0f4d06feb7a00553d7b46603ca44aaca1dd036cd7082d6cecf39137242c0cb9e.css integrity="sha256-D00G/regBVPXtGYDykSqyh3QNs1wgtbOzzkTckLAy54=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.gby.ai/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.gby.ai/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.gby.ai/favicon-32x32.png><link rel=apple-touch-icon href=https://www.gby.ai/apple-touch-icon.png><link rel=mask-icon href=https://www.gby.ai/safari_pinned_tab.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://npm.elemecdn.com/lxgw-wenkai-screen-webfont@1.7.0/style.css media=print onload='this.media="all"'><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?4bddc7ae6f2203e19017f349bdcc79c2",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-VE0D4BXTS2"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VE0D4BXTS2",{anonymize_ip:!1})}</script><meta property="og:title" content="Go基础系列：9. 内置集合 - map"><meta property="og:description" content="go语言map的创建、遍历、删除键等知识讲解"><meta property="og:type" content="article"><meta property="og:url" content="https://www.gby.ai/golang-map/"><meta property="og:image" content="https://images.unsplash.com/photo-1547815749-838c83787de2?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3wzNjAwOTd8MHwxfHNlYXJjaHw4OHx8bWFwfGVufDB8MHx8fDE3MDMyNDkxODZ8MA&ixlib=rb-4.0.3&q=80&w=400"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-16T17:21:56+08:00"><meta property="article:modified_time" content="2021-07-16T17:21:56+08:00"><meta property="og:site_name" content="PrintLove"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://images.unsplash.com/photo-1547815749-838c83787de2?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3wzNjAwOTd8MHwxfHNlYXJjaHw4OHx8bWFwfGVufDB8MHx8fDE3MDMyNDkxODZ8MA&ixlib=rb-4.0.3&q=80&w=400"><meta name=twitter:title content="Go基础系列：9. 内置集合 - map"><meta name=twitter:description content="go语言map的创建、遍历、删除键等知识讲解"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.gby.ai/posts/"},{"@type":"ListItem","position":2,"name":"Go基础系列：9. 内置集合 - map","item":"https://www.gby.ai/golang-map/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Go基础系列：9. 内置集合 - map","name":"Go基础系列：9. 内置集合 - map","description":"go语言map的创建、遍历、删除键等知识讲解","keywords":["go","map"],"articleBody":"学到什么 什么是 map？ 如何创建 map？ 判断键是否存在？ 如何获取 map 长度？ 如何遍历 map？ 如何删除键/值对？ map 是引用类型还是值类型？ 概念 map 是一种键 (key)/值 (value) 对的无序集合，在其它语言中称为字典、关联数组、哈希表等。当给定了键可以快速定位到值，而且键必须唯一的，不能出现相同。\n声明 格式： var 变量名 map[键类型][值类型]\n举例：声明了一个键为 int 类型，值为 string 类型的 map。\nvar dic map[int]string 注：未初始化，dic 为 nil。\n键类型限制 声明 map 时，键不是所有类型都支持，它只支持可以使用 != 或 == 操作符比较的类型。讲的这，也明白了在 Go 语言中不是所有类型都可以进行比较。\n哪些类型不能进行比较？\n函数 map 切片 元素是函数、map、切片的数组 字段中包含函数、map、切片的结构体 初始化 初始化 map 有两种方式，第一种使用 make 函数，第二种是声明 map 时，初始化具体的键和值。如果 map 未初始化是不能存取值的，不然编译器报错。\n1. make 函数 dic := make(map[int]string) 现在就可以存值了，初始化后的 map 会根据新增的键值动态伸缩，使用 len 函数获取长度。\n// collection/map-make.go dic := make(map[int]string) dic[1] = \"lao\" dic[3] = \"miao\" fmt.Println(\"dic长度:\", len(dic)) // 输出 dic长度: 2 在初始化时，可以提前定义好 map 所需要的容量（空间大小），当添加的键值超过容量时自动加一。\n// collection/map-make-cap.go dic := make(map[int]string, 10) // 容量为 10 ，存了 1 个 dic[1] = \"lao\" fmt.Println(\"dic长度:\", len(dic)) // 输出 dic长度: 1 2. 声明时初始化 声明了一个键为 string 类型, 值为 int 类型的 map，并初始化了 3 个键/值对。\n// collection/map-init.go m := map[string]int{ \"a\": 2, \"b\": 3, \"c\": 4, } fmt.Println(\"b:\", m[\"b\"]) // 输出 b: 3 初始化时也可以不指定键和值，这种情况和不指定容量的 make 函数是相同的。\nm := map[string]int{} 等价于 m := make(map[string]int) 键是否存在 从初始化的 map 中获取一个没有存储的键时，编译器是不会报错的，它会返回值类型的默认值。例如：值类型是 int 就返回 0、值类型是 string 就返回空字符串。\n那怎么判断键是否存在呢？格式如下：\nv，ok := map[key] v：map 的值 ok：bool 类型，如果 key 存在为 true，反之为 false 举例：\n// collection/map-key.go dic := map[int]string{} dic[0] = \"a\" if v, ok := dic[0]; ok { fmt.Println(v) } // 输出 a 删除键/值对 使用 delete 函数可以删除 map 中的键/值对，格式如下：\ndelete(map, 键) 注：如果键不存在时，编译器也可以通过。\n举例：\nm := map[string]int{ \"a\": 2, \"b\": 3, \"c\": 4, } delete(m, \"b\") fmt.Println(m) // 输出 map[a:2 c:4] 遍历 遍历 map 需要用到 for-range 语法，如果不懂先看看 《流程控制》。\nm := map[string]int{ \"a\": 2, \"b\": 3, \"c\": 4, } // k 为键，v 为值 for k, v := range m { fmt.Println(\"key:\", k, \",value:\", v) } // 输出 key: a ,value: 2 key: b ,value: 3 key: c ,value: 4 代码中 v 可以省略，这样表示只遍历键。如果只想遍历值，那 k 用 _ （下划线）代替，表示省略。\n// 只遍历键 for k := range m { ... } // 只遍历值 for _, v := range m { ... } 引用类型 map 是引用类型，因此在传递过程中它只存在一份。\n如果像拷贝 map，没有类似 copy 的函数。实现需新创建一个 map，手动遍历赋值。\n// collection/map-copy.go m := map[string]int{ \"a\": 2, \"b\": 3, } // 遍历拷贝 mCopy := map[string]int{} for k, v := range m { mCopy[k] = v } 总结 本篇讲解了 map 的创建、遍历、删除等知识点，这些都很常用，所以一定要掌握。\n","wordCount":"336","inLanguage":"zh","image":"https://images.unsplash.com/photo-1547815749-838c83787de2?crop=entropy\u0026cs=tinysrgb\u0026fit=max\u0026fm=jpg\u0026ixid=M3wzNjAwOTd8MHwxfHNlYXJjaHw4OHx8bWFwfGVufDB8MHx8fDE3MDMyNDkxODZ8MA\u0026ixlib=rb-4.0.3\u0026q=80\u0026w=400","datePublished":"2021-07-16T17:21:56+08:00","dateModified":"2021-07-16T17:21:56+08:00","author":[{"@type":"Person","name":"Evan Miao"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.gby.ai/golang-map/"},"publisher":{"@type":"Organization","name":"PrintLove","logo":{"@type":"ImageObject","url":"https://www.gby.ai/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.gby.ai/ accesskey=h title="PrintLove (Alt + H)">PrintLove</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.gby.ai/archives title=文章><span>文章</span></a></li><li><a href=https://www.gby.ai/series title=系列><span>系列</span></a></li><li><a href=https://www.gby.ai/sponsor title=赞助><span>赞助</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Go基础系列：9. 内置集合 - map</h1><div class=post-meta><span title='2021-07-16 17:21:56 +0800 CST'>2021-07-16</span>&nbsp;·&nbsp;Evan Miao&nbsp;|&nbsp;<a href=https://github.com/miaogaolin/workspace-obisidian-publisher/tree/main/content/posts/Go%e5%9f%ba%e7%a1%80%e7%b3%bb%e5%88%97%ef%bc%9a9.%20%e5%86%85%e7%bd%ae%e9%9b%86%e5%90%88%20-%20map.md rel="noopener noreferrer" target=_blank>指出问题</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#学到什么>学到什么</a></li><li><a href=#概念>概念</a></li><li><a href=#声明>声明</a><ul><li><a href=#键类型限制>键类型限制</a></li></ul></li><li><a href=#初始化>初始化</a><ul><li><a href=#1-make-函数>1. make 函数</a></li><li><a href=#2-声明时初始化>2. 声明时初始化</a></li></ul></li><li><a href=#键是否存在>键是否存在</a></li><li><a href=#删除键值对>删除键/值对</a></li><li><a href=#遍历>遍历</a></li><li><a href=#引用类型>引用类型</a></li><li><a href=#总结>总结</a></li></ul></nav></div></details></div><div class=post-content><h2 id=学到什么>学到什么<a hidden class=anchor aria-hidden=true href=#学到什么>#</a></h2><ol><li>什么是 map？</li><li>如何创建 map？</li><li>判断键是否存在？</li><li>如何获取 map 长度？</li><li>如何遍历 map？</li><li>如何删除键/值对？</li><li>map 是引用类型还是值类型？</li></ol><h2 id=概念>概念<a hidden class=anchor aria-hidden=true href=#概念>#</a></h2><p>map 是一种键 (key)/值 (value) 对的无序集合，在其它语言中称为字典、关联数组、哈希表等。当给定了键可以快速定位到值，而且<strong>键必须唯一</strong>的，不能出现相同。</p><h2 id=声明>声明<a hidden class=anchor aria-hidden=true href=#声明>#</a></h2><p>格式： <code>var 变量名 map[键类型][值类型]</code></p><p>举例：声明了一个键为 <code>int</code> 类型，值为 <code>string</code> 类型的 map。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>dic</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>int</span>]<span style=color:#66d9ef>string</span>  
</span></span></code></pre></div><p>注：未初始化，dic 为 nil。</p><h3 id=键类型限制>键类型限制<a hidden class=anchor aria-hidden=true href=#键类型限制>#</a></h3><p>声明 map 时，键不是所有类型都支持，它只支持可以使用 <code>!=</code> 或 <code>==</code> 操作符比较的类型。讲的这，也明白了在 <strong>Go 语言中不是所有类型都可以进行比较</strong>。</p><p>哪些类型不能进行比较？</p><ul><li>函数</li><li>map</li><li>切片</li><li>元素是函数、map、切片的数组</li><li>字段中包含函数、map、切片的结构体</li></ul><h2 id=初始化>初始化<a hidden class=anchor aria-hidden=true href=#初始化>#</a></h2><p>初始化 map 有两种方式，第一种使用 <code>make</code> 函数，第二种是声明 map 时，初始化具体的键和值。如果 map 未初始化是不能存取值的，不然编译器报错。</p><h3 id=1-make-函数>1. make 函数<a hidden class=anchor aria-hidden=true href=#1-make-函数>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>dic</span> <span style=color:#f92672>:=</span> make(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>int</span>]<span style=color:#66d9ef>string</span>)  
</span></span></code></pre></div><p>现在就可以存值了，初始化后的 map 会根据新增的键值动态伸缩，使用 <code>len</code> 函数获取长度。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// collection/map-make.go  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>dic</span> <span style=color:#f92672>:=</span> make(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>int</span>]<span style=color:#66d9ef>string</span>)  
</span></span><span style=display:flex><span><span style=color:#a6e22e>dic</span>[<span style=color:#ae81ff>1</span>] = <span style=color:#e6db74>&#34;lao&#34;</span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>dic</span>[<span style=color:#ae81ff>3</span>] = <span style=color:#e6db74>&#34;miao&#34;</span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;dic长度:&#34;</span>, len(<span style=color:#a6e22e>dic</span>))  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 输出  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>dic</span><span style=color:#960050;background-color:#1e0010>长度</span>: <span style=color:#ae81ff>2</span>  
</span></span></code></pre></div><p>在初始化时，可以提前定义好 map 所需要的容量（空间大小），当<strong>添加的键值超过容量时自动加一</strong>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// collection/map-make-cap.go  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>dic</span> <span style=color:#f92672>:=</span> make(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>int</span>]<span style=color:#66d9ef>string</span>, <span style=color:#ae81ff>10</span>)  
</span></span><span style=display:flex><span><span style=color:#75715e>// 容量为 10 ，存了 1 个  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>dic</span>[<span style=color:#ae81ff>1</span>] = <span style=color:#e6db74>&#34;lao&#34;</span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;dic长度:&#34;</span>, len(<span style=color:#a6e22e>dic</span>))  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 输出  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>dic</span><span style=color:#960050;background-color:#1e0010>长度</span>: <span style=color:#ae81ff>1</span>  
</span></span></code></pre></div><h3 id=2-声明时初始化>2. 声明时初始化<a hidden class=anchor aria-hidden=true href=#2-声明时初始化>#</a></h3><p>声明了一个键为 <code>string</code> 类型, 值为 <code>int</code> 类型的 map，并初始化了 3 个键/值对。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// collection/map-init.go  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>m</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>{  
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;a&#34;</span>: <span style=color:#ae81ff>2</span>,  
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;b&#34;</span>: <span style=color:#ae81ff>3</span>,  
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;c&#34;</span>: <span style=color:#ae81ff>4</span>,  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;b:&#34;</span>, <span style=color:#a6e22e>m</span>[<span style=color:#e6db74>&#34;b&#34;</span>])  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 输出  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>b</span>: <span style=color:#ae81ff>3</span>  
</span></span></code></pre></div><p>初始化时也可以不指定键和值，这种情况和不指定容量的 <code>make</code> 函数是相同的。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>m</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>{}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>等价于</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>m</span> <span style=color:#f92672>:=</span> make(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>)  
</span></span></code></pre></div><h2 id=键是否存在>键是否存在<a hidden class=anchor aria-hidden=true href=#键是否存在>#</a></h2><p>从初始化的 map 中获取一个没有存储的键时，编译器是不会报错的，它会返回值类型的默认值。例如：值类型是 int 就返回 0、值类型是 string 就返回空字符串。</p><p>那怎么判断键是否存在呢？格式如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>v</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#a6e22e>key</span>]  
</span></span></code></pre></div><ul><li>v：map 的值</li><li>ok：bool 类型，如果 key 存在为 true，反之为 false</li></ul><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// collection/map-key.go  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>dic</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>int</span>]<span style=color:#66d9ef>string</span>{}  
</span></span><span style=display:flex><span><span style=color:#a6e22e>dic</span>[<span style=color:#ae81ff>0</span>] = <span style=color:#e6db74>&#34;a&#34;</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>v</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>dic</span>[<span style=color:#ae81ff>0</span>]; <span style=color:#a6e22e>ok</span> {  
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>v</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 输出  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>a</span>  
</span></span></code></pre></div><h2 id=删除键值对>删除键/值对<a hidden class=anchor aria-hidden=true href=#删除键值对>#</a></h2><p>使用 <code>delete</code> 函数可以删除 map 中的键/值对，格式如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>delete(<span style=color:#66d9ef>map</span>, <span style=color:#960050;background-color:#1e0010>键</span>)  
</span></span></code></pre></div><p>注：如果键不存在时，编译器也可以通过。</p><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>m</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>{  
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;a&#34;</span>: <span style=color:#ae81ff>2</span>,  
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;b&#34;</span>: <span style=color:#ae81ff>3</span>,  
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;c&#34;</span>: <span style=color:#ae81ff>4</span>,  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>delete(<span style=color:#a6e22e>m</span>, <span style=color:#e6db74>&#34;b&#34;</span>)  
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>m</span>)  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 输出  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>map</span>[<span style=color:#a6e22e>a</span>:<span style=color:#ae81ff>2</span> <span style=color:#a6e22e>c</span>:<span style=color:#ae81ff>4</span>]  
</span></span></code></pre></div><h2 id=遍历>遍历<a hidden class=anchor aria-hidden=true href=#遍历>#</a></h2><p>遍历 map 需要用到 for-range 语法，如果不懂先看看 <a href=/golang-if-for-switch/>《流程控制》</a>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>m</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>{  
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;a&#34;</span>: <span style=color:#ae81ff>2</span>,  
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;b&#34;</span>: <span style=color:#ae81ff>3</span>,  
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;c&#34;</span>: <span style=color:#ae81ff>4</span>,  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span><span style=color:#75715e>// k 为键，v 为值  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>k</span>, <span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>m</span> {  
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;key:&#34;</span>, <span style=color:#a6e22e>k</span>, <span style=color:#e6db74>&#34;,value:&#34;</span>, <span style=color:#a6e22e>v</span>)  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 输出  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>key</span>: <span style=color:#a6e22e>a</span> ,<span style=color:#a6e22e>value</span>: <span style=color:#ae81ff>2</span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>key</span>: <span style=color:#a6e22e>b</span> ,<span style=color:#a6e22e>value</span>: <span style=color:#ae81ff>3</span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>key</span>: <span style=color:#a6e22e>c</span> ,<span style=color:#a6e22e>value</span>: <span style=color:#ae81ff>4</span>  
</span></span></code></pre></div><p>代码中 <code>v</code> 可以省略，这样表示只遍历键。如果只想遍历值，那 <code>k</code> 用 <code>_</code> （下划线）代替，表示省略。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 只遍历键  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>k</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>m</span> {  
</span></span><span style=display:flex><span>	<span style=color:#f92672>...</span>  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 只遍历值  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>m</span> {  
</span></span><span style=display:flex><span>	<span style=color:#f92672>...</span>  
</span></span><span style=display:flex><span>}  
</span></span></code></pre></div><h2 id=引用类型>引用类型<a hidden class=anchor aria-hidden=true href=#引用类型>#</a></h2><p><strong>map 是引用类型</strong>，因此在传递过程中它只存在一份。</p><p>如果像拷贝 map，没有类似 <code>copy</code> 的函数。实现需新创建一个 map，手动遍历赋值。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// collection/map-copy.go  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>m</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>{  
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;a&#34;</span>: <span style=color:#ae81ff>2</span>,  
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;b&#34;</span>: <span style=color:#ae81ff>3</span>,  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 遍历拷贝  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>mCopy</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>{}  
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>k</span>, <span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>m</span> {  
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>mCopy</span>[<span style=color:#a6e22e>k</span>] = <span style=color:#a6e22e>v</span>  
</span></span><span style=display:flex><span>}  
</span></span></code></pre></div><h2 id=总结>总结<a hidden class=anchor aria-hidden=true href=#总结>#</a></h2><p>本篇讲解了 map 的创建、遍历、删除等知识点，这些都很常用，所以一定要掌握。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.gby.ai/tags/program_golang/>program_golang</a></li></ul><nav class=paginav><a class=prev href=https://www.gby.ai/docker-speed/><span class=title>« 上一页</span><br><span>简单且真实有效的Docker镜像加速</span></a>
<a class=next href=https://www.gby.ai/golang-slice/><span class=title>下一页 »</span><br><span>Go基础系列：8. 内置集合 - 切片</span></a></nav><div class=comment-head>评论 & Email：</div><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Go基础系列：9. 内置集合 - map on x" href="https://x.com/intent/tweet/?text=@laomiao_ Go%e5%9f%ba%e7%a1%80%e7%b3%bb%e5%88%97%ef%bc%9a9.%20%e5%86%85%e7%bd%ae%e9%9b%86%e5%90%88%20-%20map&amp;url=https%3a%2f%2fwww.gby.ai%2fgolang-map%2f&amp;hashtags=program_golang"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 50 50" fill="currentcolor"><path d="M5.9199219 6 20.582031 27.375 6.2304688 44H9.4101562L21.986328 29.421875 31.986328 44H44L28.681641 21.669922 42.199219 6H39.029297L27.275391 19.617188 17.933594 6H5.9199219zm3.796875 2H16.880859L40.203125 42H33.039062L9.7167969 8z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Go基础系列：9. 内置集合 - map on email" href="mailto:mglluoye@gmail.com?subject=Go%e5%9f%ba%e7%a1%80%e7%b3%bb%e5%88%97%ef%bc%9a9.%20%e5%86%85%e7%bd%ae%e9%9b%86%e5%90%88%20-%20map"><svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 12C2 7.28595 2 4.92893 3.46447 3.46447 4.92893 2 7.28595 2 12 2c4.714.0 7.0711.0 8.5355 1.46447C22 4.92893 22 7.28595 22 12c0 4.714.0 7.0711-1.4645 8.5355C19.0711 22 16.714 22 12 22c-4.71405.0-7.07107.0-8.53553-1.4645C2 19.0711 2 16.714 2 12z" stroke="currentcolor" stroke-width="1.5"/><path d="M2 13H5.16026c.90517.0 1.35776.0 1.75558.183.39783.1829.69237.5266 1.28145 1.2138L8.80271 15.1032C9.39179 15.7904 9.68633 16.1341 10.0842 16.317 10.482 16.5 10.9346 16.5 11.8397 16.5H12.1603C13.0654 16.5 13.518 16.5 13.9158 16.317 14.3137 16.1341 14.6082 15.7904 15.1973 15.1032L15.8027 14.3968C16.3918 13.7096 16.6863 13.3659 17.0842 13.183 17.482 13 17.9346 13 18.8397 13H22" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/><path d="M8 7h8" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/><path d="M10 10.5h4" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/></svg></a></div></footer></article></main><footer class=footer><span>Content under license <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
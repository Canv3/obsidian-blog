<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Go基础系列：11. 包 | PrintLove</title><meta name=keywords content="program_golang"><meta name=description content="学习 Go 语言中包的声明、导入、使用、和包之间的加载顺序等等"><meta name=author content="Evan Miao"><link rel=canonical href=https://www.gby.ai/golang-package/><link crossorigin=anonymous href=/assets/css/stylesheet.0f4d06feb7a00553d7b46603ca44aaca1dd036cd7082d6cecf39137242c0cb9e.css integrity="sha256-D00G/regBVPXtGYDykSqyh3QNs1wgtbOzzkTckLAy54=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.gby.ai/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.gby.ai/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.gby.ai/favicon-32x32.png><link rel=apple-touch-icon href=https://www.gby.ai/apple-touch-icon.png><link rel=mask-icon href=https://www.gby.ai/safari_pinned_tab.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://npm.elemecdn.com/lxgw-wenkai-screen-webfont@1.7.0/style.css media=print onload='this.media="all"'><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?4bddc7ae6f2203e19017f349bdcc79c2",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-VE0D4BXTS2"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VE0D4BXTS2",{anonymize_ip:!1})}</script><meta property="og:title" content="Go基础系列：11. 包"><meta property="og:description" content="学习 Go 语言中包的声明、导入、使用、和包之间的加载顺序等等"><meta property="og:type" content="article"><meta property="og:url" content="https://www.gby.ai/golang-package/"><meta property="og:image" content="https://images.unsplash.com/photo-1595246135406-803418233494?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3wzNjAwOTd8MHwxfHNlYXJjaHw2fHxwYWNrYWdlfGVufDB8MHx8fDE3MDMzMDI0Nzh8MA&ixlib=rb-4.0.3&q=80&w=400"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-09-01T17:35:56+08:00"><meta property="article:modified_time" content="2021-09-01T17:35:56+08:00"><meta property="og:site_name" content="PrintLove"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://images.unsplash.com/photo-1595246135406-803418233494?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3wzNjAwOTd8MHwxfHNlYXJjaHw2fHxwYWNrYWdlfGVufDB8MHx8fDE3MDMzMDI0Nzh8MA&ixlib=rb-4.0.3&q=80&w=400"><meta name=twitter:title content="Go基础系列：11. 包"><meta name=twitter:description content="学习 Go 语言中包的声明、导入、使用、和包之间的加载顺序等等"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.gby.ai/posts/"},{"@type":"ListItem","position":2,"name":"Go基础系列：11. 包","item":"https://www.gby.ai/golang-package/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Go基础系列：11. 包","name":"Go基础系列：11. 包","description":"学习 Go 语言中包的声明、导入、使用、和包之间的加载顺序等等","keywords":["program_golang"],"articleBody":"学到什么 什么是包？ 如果声明包？ 如何导入包？ 源文件的组成部分？ 包内容如何公开和私有？ main 包的作用？ internal 目录的作用？ 多个包出现导入时，之间的加载顺序是什么？ 概念 做个类比理解下包是啥？当电脑上文件变多时，就会通过目录区分，将不同的文件有组织的归类在不同的目录下。Go 源文件也是一样，可以把不同的文件放置在不同的目录中，给目录取一个别名，就是所说的包名。\n下来学习包的使用，就是熟悉 Go 项目中代码的组织结构，为了直观，直接看项目目录。在上手前首先要掌握 go mod 的使用，不熟悉请前往 《环境搭建 - gomod疑惑》。\n项目目录 创建一个 gobasic 的项目目录，总共包含三个部分：入口文件、gomod、自定义两个包。\n调用顺序：main.go \u003e\u003e b.go \u003e\u003e a.go 。\n下来从这三个文件入手，开始学习。\n包声明 在源文件的开头添加如下代码格式：\n// a.go package pkgA pkgA 为自定义的包名。标准规范中，该命名与源文件所在目录名称相同。入口 \"main 函数 \" 的所在源文件包名必须设置为 main。\n在同一个包（目录）下，可以创建多个源文件。\n包导入 声明一个包后，就可以被其它包导入使用，格式如下：\n// b.go package pkgB import \"github.com/miaogaolin/gobasic/pkgA\" 文件开头声明了源文件所在包为 pkgB ，下来使用 import 关键字导入所依赖的包。如果导入的是当前项目中的包，引用路径的规则为 \"go.mod\" 文件中设置的 module 值与依赖包的目录路径拼接。\n我的项目 module 值为：\ngithub.com/miaogaolin/gobasic\n导入之后，就可以使用**“包名 + 点”**访问包内的变量、常量、函数、结构体、接口。\n1. 多包导入 如果有多个包需要导入时，有两种方式，第二种为常见方式。\n// 第一种 import \"gobasic/pkgA\" import \"fmt\" // 第二种 import ( \"fmt\" \"github.com/miaogaolin/gobasic/pkgA\" ) 引用后就可以调用包内的函数、常量、结构体等等。如果调用的函数在同一个包下，就不需要导入，可以直接调用。\n2. 简化导入 使用“点”导入的包，在调用包内的变量、常量、函数等等，就不需要写包名。\n例：\nimport . \"fmt\" // 不使用“点”导入 fmt.Println() // 使用“点”导入 Println() 3. 别名导入 给导入的包可以使用一个别名，这样如果导入的多个包时，名称一样出现冲突时，就可以取个别名。\n例：\nimport a \"exmaple/pkgA\" // a 为别名 a.Func1() 4. 匿名导入 在导入包时，如果该包没有被使用，那编译器就会报错。为了不让报错，可以使用匿名导入。那为何不直接删除呢？是因为想使用包内的 init() 函数，该函数在包被导入时自动调用。\n例：\nimport _ \"github.com/go-sql-driver/mysql\" 例子中，mysql 这个包内会存在一个 ”init 函数“，该函数的意义表示注册 mysql 驱动。\n源文件组成 了解了包的声明和引用后，下来看看源文件的完整组成结构。\n例：\n// b.go package pkgB import ( \"fmt\" \"github.com/miaogaolin/gobasic/pkgA\" ) var name string func init() { name = \"B\" } func PrintName() { fmt.Println(name) // 调用 pkgA 包中的一个函数 pkgA.PrintName() } 在这个例子中没有给出 pkgA 包的代码，完整的代码前往：\nhttps://github.com/miaogaolin/gobasic\n下来根据这个例子讲解两个知识点，继续往下看。\n1. 包的使用 pkgA.PrintName() 这个访问有个前提，就是函数的命名首字母必须大写，如果是小写开头那只能在当前包内访问，而不能被其它包调用。\n例如， b.go 文件中的 name 变量就不能被其它包访问。如果想要访问，就需要改为 Name 。函数、结构体、接口、常量，也是一样的。\n总结下就是小写字母开头私有，大写字母开头公有。\n2. init 函数 该函数是 Go 语言中的保留函数，当包被导入后自动执行，不需要主动调用。该函数可以在同一个包内的不同源文件中使用。如果是自定义的函数自然是不行的，相同的函数名称只能在同一个包内出现一次。\nmain 包 在学习 Go 语言开始时，写了一个 \"Hello World\" 输出的例子中就有见过，摘取关键代码如下：\n// 入口文件的包名 package main // 入口函数 func main() { ...\t} “main 包”和“main 函数” 这两者的组合，确定了程序的启动入口。\ninternal 目录 这也是 Go 语言中一个特殊的目录，如果源文件在 internal 目录中，那该目录的父级父级目录是不能访问 internal 目录下的内容的。\n这块我说的是目录，不是包名。虽然我在前面讲了，在规范中，目录名称和包名保持相同，但如果不相同语法也是正确的。\n回到 internal 目录，如果 internal 目录下定义的包名不是 internal 名称，外部也是不能访问的。只要目录名称不是 internal 就算包名是，外部就能访问。\n举例展示一个 internal 目录层级，说明下访问性。\nexmaple dir1 internal main.go 在上例中，internal 目录的父级父级目录是 exmaple，那在 main.go 文件中就不能访问 internal 目录中的内容。\n包的加载顺序 这里我们从 main 包入口开始，main 包导入 pkg1，pkg1 导入 pkg2，pkg2 导入 pkg3。\n过程如下：\nmain 包执行 import pkg1。 pkg1 继续执行 import pkg2。 pkg2 继续执行 import pkg3。 pkg3 由于没有依赖其它包，所以向下执行常量、变量的初始化并执行 init 函数。 接下来执行 pkg2、pkg1、main 包内的常量、变量初始化和执行 init 函数。 最后开始执行 main 函数。 总结 熟悉了包的应用后，下来就要多熟悉熟悉常用包的使用，比如：\nfmt time strings regexp 等等...\n当然也不是都要熟悉，等基础知识学完后，找个实际项目实战，看到哪个包就学哪个就够了。\n","wordCount":"282","inLanguage":"zh","image":"https://images.unsplash.com/photo-1595246135406-803418233494?crop=entropy\u0026cs=tinysrgb\u0026fit=max\u0026fm=jpg\u0026ixid=M3wzNjAwOTd8MHwxfHNlYXJjaHw2fHxwYWNrYWdlfGVufDB8MHx8fDE3MDMzMDI0Nzh8MA\u0026ixlib=rb-4.0.3\u0026q=80\u0026w=400","datePublished":"2021-09-01T17:35:56+08:00","dateModified":"2021-09-01T17:35:56+08:00","author":[{"@type":"Person","name":"Evan Miao"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.gby.ai/golang-package/"},"publisher":{"@type":"Organization","name":"PrintLove","logo":{"@type":"ImageObject","url":"https://www.gby.ai/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.gby.ai/ accesskey=h title="PrintLove (Alt + H)">PrintLove</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.gby.ai/archives title=文章><span>文章</span></a></li><li><a href=https://www.gby.ai/series title=系列><span>系列</span></a></li><li><a href=https://www.gby.ai/sponsor title=赞助><span>赞助</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Go基础系列：11. 包</h1><div class=post-meta><span title='2021-09-01 17:35:56 +0800 CST'>2021-09-01</span>&nbsp;·&nbsp;Evan Miao&nbsp;|&nbsp;<a href=https://github.com/miaogaolin/workspace-obisidian-publisher/tree/main/content/posts/Go%e5%9f%ba%e7%a1%80%e7%b3%bb%e5%88%97%ef%bc%9a11.%20%e5%8c%85.md rel="noopener noreferrer" target=_blank>指出问题</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#学到什么>学到什么</a></li><li><a href=#概念>概念</a></li><li><a href=#项目目录>项目目录</a></li><li><a href=#包声明>包声明</a></li><li><a href=#包导入>包导入</a><ul><li><a href=#1-多包导入>1. 多包导入</a></li><li><a href=#2-简化导入>2. 简化导入</a></li><li><a href=#3-别名导入>3. 别名导入</a></li><li><a href=#4-匿名导入>4. 匿名导入</a></li></ul></li><li><a href=#源文件组成>源文件组成</a><ul><li><a href=#1-包的使用>1. 包的使用</a></li><li><a href=#2-init-函数>2. init 函数</a></li></ul></li><li><a href=#main-包>main 包</a></li><li><a href=#internal-目录>internal 目录</a></li><li><a href=#包的加载顺序>包的加载顺序</a></li><li><a href=#总结>总结</a></li></ul></nav></div></details></div><div class=post-content><h2 id=学到什么>学到什么<a hidden class=anchor aria-hidden=true href=#学到什么>#</a></h2><ol><li>什么是包？</li><li>如果声明包？</li><li>如何导入包？</li><li>源文件的组成部分？</li><li>包内容如何公开和私有？</li><li>main 包的作用？</li><li>internal 目录的作用？</li><li>多个包出现导入时，之间的加载顺序是什么？</li></ol><h2 id=概念>概念<a hidden class=anchor aria-hidden=true href=#概念>#</a></h2><p>做个类比理解下包是啥？当电脑上文件变多时，就会通过目录区分，将不同的文件有组织的归类在不同的目录下。Go 源文件也是一样，可以把不同的文件放置在不同的目录中，给目录取一个别名，就是所说的包名。</p><p>下来学习包的使用，就是熟悉 Go 项目中代码的组织结构，为了直观，直接看项目目录。在上手前首先要掌握 <code>go mod</code> 的使用，不熟悉请前往 <a href=/gomod/>《环境搭建 - gomod疑惑》</a>。</p><h2 id=项目目录>项目目录<a hidden class=anchor aria-hidden=true href=#项目目录>#</a></h2><p>创建一个 <code>gobasic</code> 的项目目录，总共包含三个部分：入口文件、gomod、自定义两个包。</p><p><img loading=lazy src=https://printlove.cn/posts/gobasic/images/11-1.png alt></p><p>调用顺序：<code>main.go</code> >> <code>b.go</code> >> <code>a.go</code> 。</p><p>下来从这三个文件入手，开始学习。</p><h2 id=包声明>包声明<a hidden class=anchor aria-hidden=true href=#包声明>#</a></h2><p>在源文件的开头添加如下代码格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// a.go  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>package</span> <span style=color:#a6e22e>pkgA</span>  
</span></span></code></pre></div><p><code>pkgA</code> 为自定义的包名。标准规范中，该命名与源文件所在目录名称相同。入口 "main 函数 " 的所在源文件包名必须设置为 main。</p><p>在同一个包（目录）下，可以创建多个源文件。</p><h2 id=包导入>包导入<a hidden class=anchor aria-hidden=true href=#包导入>#</a></h2><p>声明一个包后，就可以被其它包导入使用，格式如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// b.go  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>package</span> <span style=color:#a6e22e>pkgB</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;github.com/miaogaolin/gobasic/pkgA&#34;</span>  
</span></span></code></pre></div><p>文件开头声明了源文件所在包为 <code>pkgB</code> ，下来使用 <code>import</code> 关键字导入所依赖的包。如果导入的是当前项目中的包，引用路径的规则为 "go.mod" 文件中设置的 <code>module</code> 值与依赖包的目录路径拼接。</p><p>我的项目 module 值为：<br>github.com/miaogaolin/gobasic</p><p>导入之后，就可以使用**“包名 + 点”**访问包内的变量、常量、函数、结构体、接口。</p><h3 id=1-多包导入>1. 多包导入<a hidden class=anchor aria-hidden=true href=#1-多包导入>#</a></h3><p>如果有多个包需要导入时，有两种方式，第二种为常见方式。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 第一种  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;gobasic/pkgA&#34;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;fmt&#34;</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 第二种  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>import</span> (  
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;github.com/miaogaolin/gobasic/pkgA&#34;</span>  
</span></span><span style=display:flex><span>)  
</span></span></code></pre></div><p>引用后就可以调用包内的函数、常量、结构体等等。如果调用的函数在同一个包下，就不需要导入，可以直接调用。</p><h3 id=2-简化导入>2. 简化导入<a hidden class=anchor aria-hidden=true href=#2-简化导入>#</a></h3><p>使用“点”导入的包，在调用包内的变量、常量、函数等等，就不需要写包名。</p><p>例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>import</span> . <span style=color:#e6db74>&#34;fmt&#34;</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 不使用“点”导入  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>()  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 使用“点”导入  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>Println</span>()  
</span></span></code></pre></div><h3 id=3-别名导入>3. 别名导入<a hidden class=anchor aria-hidden=true href=#3-别名导入>#</a></h3><p>给导入的包可以使用一个别名，这样如果导入的多个包时，名称一样出现冲突时，就可以取个别名。</p><p>例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#a6e22e>a</span> <span style=color:#e6db74>&#34;exmaple/pkgA&#34;</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// a 为别名  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>a</span>.<span style=color:#a6e22e>Func1</span>()  
</span></span></code></pre></div><h3 id=4-匿名导入>4. 匿名导入<a hidden class=anchor aria-hidden=true href=#4-匿名导入>#</a></h3><p>在导入包时，如果该包没有被使用，那编译器就会报错。为了不让报错，可以使用匿名导入。那为何不直接删除呢？是因为想使用包内的 <code>init()</code> 函数，该函数在包被导入时自动调用。</p><p>例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#a6e22e>_</span> <span style=color:#e6db74>&#34;github.com/go-sql-driver/mysql&#34;</span>  
</span></span></code></pre></div><p>例子中，mysql 这个包内会存在一个 ”init 函数“，该函数的意义表示注册 mysql 驱动。</p><h2 id=源文件组成>源文件组成<a hidden class=anchor aria-hidden=true href=#源文件组成>#</a></h2><p>了解了包的声明和引用后，下来看看源文件的完整组成结构。</p><p><img loading=lazy src=https://printlove.cn/posts/gobasic/images/11-2.png alt></p><p>例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// b.go  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>package</span> <span style=color:#a6e22e>pkgB</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (  
</span></span><span style=display:flex><span>   <span style=color:#e6db74>&#34;fmt&#34;</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>   <span style=color:#e6db74>&#34;github.com/miaogaolin/gobasic/pkgA&#34;</span>  
</span></span><span style=display:flex><span>)  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>init</span>() {  
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;B&#34;</span>  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>PrintName</span>() {  
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>name</span>)  
</span></span><span style=display:flex><span>	 <span style=color:#75715e>// 调用 pkgA 包中的一个函数  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>   <span style=color:#a6e22e>pkgA</span>.<span style=color:#a6e22e>PrintName</span>()  
</span></span><span style=display:flex><span>}  
</span></span></code></pre></div><p>在这个例子中没有给出 <code>pkgA</code> 包的代码，完整的代码前往：</p><blockquote><p><a href=https://github.com/miaogaolin/gobasic>https://github.com/miaogaolin/gobasic</a></p></blockquote><p>下来根据这个例子讲解两个知识点，继续往下看。</p><h3 id=1-包的使用>1. 包的使用<a hidden class=anchor aria-hidden=true href=#1-包的使用>#</a></h3><p><code>pkgA.PrintName()</code> 这个访问有个前提，就是函数的命名首字母必须大写，如果是小写开头那只能在当前包内访问，而不能被其它包调用。</p><p>例如， <code>b.go</code> 文件中的 <code>name</code> 变量就不能被其它包访问。如果想要访问，就需要改为 <code>Name</code> 。函数、结构体、接口、常量，也是一样的。</p><p>总结下就是<strong>小写字母开头私有，大写字母开头公有</strong>。</p><h3 id=2-init-函数>2. init 函数<a hidden class=anchor aria-hidden=true href=#2-init-函数>#</a></h3><p>该函数是 Go 语言中的保留函数，当包被导入后自动执行，不需要主动调用。该函数可以在同一个包内的不同源文件中使用。如果是自定义的函数自然是不行的，相同的函数名称只能在同一个包内出现一次。</p><h2 id=main-包>main 包<a hidden class=anchor aria-hidden=true href=#main-包>#</a></h2><p>在学习 Go 语言开始时，写了一个 "Hello World" 输出的例子中就有见过，摘取关键代码如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 入口文件的包名  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>// 入口函数  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {  
</span></span><span style=display:flex><span>	<span style=color:#f92672>...</span>	  
</span></span><span style=display:flex><span>}  
</span></span></code></pre></div><p>“main 包”和“main 函数” 这两者的组合，确定了程序的启动入口。</p><h2 id=internal-目录>internal 目录<a hidden class=anchor aria-hidden=true href=#internal-目录>#</a></h2><p>这也是 Go 语言中一个特殊的目录，如果源文件在 <code>internal</code> 目录中，那该目录的父级父级目录是不能访问 internal 目录下的内容的。</p><p>这块我说的是目录，不是包名。虽然我在前面讲了，在规范中，目录名称和包名保持相同，但如果不相同语法也是正确的。</p><p>回到 internal 目录，如果 internal 目录下定义的包名不是 internal 名称，外部也是不能访问的。只要目录名称不是 internal 就算包名是，外部就能访问。</p><p>举例展示一个 internal 目录层级，说明下访问性。</p><ul><li>exmaple<ul><li>dir1<ul><li>internal</li></ul></li><li>main.go</li></ul></li></ul><p>在上例中，internal 目录的父级父级目录是 exmaple，那在 main.go 文件中就不能访问 internal 目录中的内容。</p><h2 id=包的加载顺序>包的加载顺序<a hidden class=anchor aria-hidden=true href=#包的加载顺序>#</a></h2><p>这里我们从 main 包入口开始，main 包导入 pkg1，pkg1 导入 pkg2，pkg2 导入 pkg3。</p><p><img loading=lazy src=https://printlove.cn/posts/gobasic/images/11-3.png alt></p><p>过程如下：</p><ol><li>main 包执行 import pkg1。</li><li>pkg1 继续执行 import pkg2。</li><li>pkg2 继续执行 import pkg3。</li><li>pkg3 由于没有依赖其它包，所以向下执行常量、变量的初始化并执行 init 函数。</li><li>接下来执行 pkg2、pkg1、main 包内的常量、变量初始化和执行 init 函数。</li><li>最后开始执行 main 函数。</li></ol><h2 id=总结>总结<a hidden class=anchor aria-hidden=true href=#总结>#</a></h2><p>熟悉了包的应用后，下来就要多熟悉熟悉常用包的使用，比如：</p><ul><li>fmt</li><li>time</li><li>strings</li><li>regexp</li></ul><p>等等...</p><p>当然也不是都要熟悉，等基础知识学完后，找个实际项目实战，看到哪个包就学哪个就够了。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.gby.ai/tags/program_golang/>program_golang</a></li></ul><nav class=paginav><a class=prev href=https://www.gby.ai/golang-struct/><span class=title>« 上一页</span><br><span>Go基础系列：12. 自定义类型和结构体 - 定义</span></a>
<a class=next href=https://www.gby.ai/secret-camera/><span class=title>下一页 »</span><br><span>中国打击隐藏摄像机和秘密拍摄</span></a></nav><div class=comment-head>评论 & Email：</div><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Go基础系列：11. 包 on x" href="https://x.com/intent/tweet/?text=@laomiao_ Go%e5%9f%ba%e7%a1%80%e7%b3%bb%e5%88%97%ef%bc%9a11.%20%e5%8c%85&amp;url=https%3a%2f%2fwww.gby.ai%2fgolang-package%2f&amp;hashtags=program_golang"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 50 50" fill="currentcolor"><path d="M5.9199219 6 20.582031 27.375 6.2304688 44H9.4101562L21.986328 29.421875 31.986328 44H44L28.681641 21.669922 42.199219 6H39.029297L27.275391 19.617188 17.933594 6H5.9199219zm3.796875 2H16.880859L40.203125 42H33.039062L9.7167969 8z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Go基础系列：11. 包 on email" href="mailto:mglluoye@gmail.com?subject=Go%e5%9f%ba%e7%a1%80%e7%b3%bb%e5%88%97%ef%bc%9a11.%20%e5%8c%85"><svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 12C2 7.28595 2 4.92893 3.46447 3.46447 4.92893 2 7.28595 2 12 2c4.714.0 7.0711.0 8.5355 1.46447C22 4.92893 22 7.28595 22 12c0 4.714.0 7.0711-1.4645 8.5355C19.0711 22 16.714 22 12 22c-4.71405.0-7.07107.0-8.53553-1.4645C2 19.0711 2 16.714 2 12z" stroke="currentcolor" stroke-width="1.5"/><path d="M2 13H5.16026c.90517.0 1.35776.0 1.75558.183.39783.1829.69237.5266 1.28145 1.2138L8.80271 15.1032C9.39179 15.7904 9.68633 16.1341 10.0842 16.317 10.482 16.5 10.9346 16.5 11.8397 16.5H12.1603C13.0654 16.5 13.518 16.5 13.9158 16.317 14.3137 16.1341 14.6082 15.7904 15.1973 15.1032L15.8027 14.3968C16.3918 13.7096 16.6863 13.3659 17.0842 13.183 17.482 13 17.9346 13 18.8397 13H22" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/><path d="M8 7h8" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/><path d="M10 10.5h4" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/></svg></a></div></footer></article></main><footer class=footer><span>Content under license <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
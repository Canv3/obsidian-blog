<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>supervisor(进程管理)小白快速上手 | PrintLove</title><meta name=keywords content><meta name=description content="简介 supervisor 是用 Python 开发的一个 client/server 服务，是 Linux/Unix 系统下的一个进程管理工具。可以很方便的监听、启动、停止、重启一个或多个进程。用 supervisor 管理的进程，当一个进程意外被杀死，supervisor 监听到进程死后，会自动将它重启，很方便的做到进程自动恢复的功能，不再需要自己写 shell 脚本来控制。
安装 sudo apt-get install supervisor 其它安装方式 使用 pip 工具
pip install supervisor 配置文件 生成 echo_supervisord_conf > /etc/supervisord.conf 配置文件加载顺序 默认在当前目录查找 supervisord.conf 配置文件
1.$CWD/supervisord.conf
2.$CWD/etc/supervisord.conf
3./etc/supervisord.conf
4./etc/supervisor/supervisord.conf (since Supervisor 3.3.0)
5.../etc/supervisord.conf (Relative to the executable)
6.../supervisord.conf (Relative to the executable)
指定配置文件 sudo supervisord -c supervisord.conf 配置程序 增加自己的一个程序，打开 supervisord.conf 配置文件
[program:jshop] command=make run ; the program (relative uses PATH, can take args) stdout_logfile=jshop."><meta name=author content="Evan Miao"><link rel=canonical href=https://www.jianshu.com/p/e86d21e8864e><link crossorigin=anonymous href=/assets/css/stylesheet.0f4d06feb7a00553d7b46603ca44aaca1dd036cd7082d6cecf39137242c0cb9e.css integrity="sha256-D00G/regBVPXtGYDykSqyh3QNs1wgtbOzzkTckLAy54=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.gby.ai/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.gby.ai/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.gby.ai/favicon-32x32.png><link rel=apple-touch-icon href=https://www.gby.ai/apple-touch-icon.png><link rel=mask-icon href=https://www.gby.ai/safari_pinned_tab.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://npm.elemecdn.com/lxgw-wenkai-screen-webfont@1.7.0/style.css media=print onload='this.media="all"'><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?4bddc7ae6f2203e19017f349bdcc79c2",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-VE0D4BXTS2"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VE0D4BXTS2",{anonymize_ip:!1})}</script><meta property="og:title" content="supervisor(进程管理)小白快速上手"><meta property="og:description" content="简介 supervisor 是用 Python 开发的一个 client/server 服务，是 Linux/Unix 系统下的一个进程管理工具。可以很方便的监听、启动、停止、重启一个或多个进程。用 supervisor 管理的进程，当一个进程意外被杀死，supervisor 监听到进程死后，会自动将它重启，很方便的做到进程自动恢复的功能，不再需要自己写 shell 脚本来控制。
安装 sudo apt-get install supervisor 其它安装方式 使用 pip 工具
pip install supervisor 配置文件 生成 echo_supervisord_conf > /etc/supervisord.conf 配置文件加载顺序 默认在当前目录查找 supervisord.conf 配置文件
1.$CWD/supervisord.conf
2.$CWD/etc/supervisord.conf
3./etc/supervisord.conf
4./etc/supervisor/supervisord.conf (since Supervisor 3.3.0)
5.../etc/supervisord.conf (Relative to the executable)
6.../supervisord.conf (Relative to the executable)
指定配置文件 sudo supervisord -c supervisord.conf 配置程序 增加自己的一个程序，打开 supervisord.conf 配置文件
[program:jshop] command=make run ; the program (relative uses PATH, can take args) stdout_logfile=jshop."><meta property="og:type" content="article"><meta property="og:url" content="https://www.gby.ai/supervisor/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-07-12T09:58:16+08:00"><meta property="article:modified_time" content="2019-07-12T09:58:16+08:00"><meta property="og:site_name" content="PrintLove"><meta name=twitter:card content="summary"><meta name=twitter:title content="supervisor(进程管理)小白快速上手"><meta name=twitter:description content="简介 supervisor 是用 Python 开发的一个 client/server 服务，是 Linux/Unix 系统下的一个进程管理工具。可以很方便的监听、启动、停止、重启一个或多个进程。用 supervisor 管理的进程，当一个进程意外被杀死，supervisor 监听到进程死后，会自动将它重启，很方便的做到进程自动恢复的功能，不再需要自己写 shell 脚本来控制。
安装 sudo apt-get install supervisor 其它安装方式 使用 pip 工具
pip install supervisor 配置文件 生成 echo_supervisord_conf > /etc/supervisord.conf 配置文件加载顺序 默认在当前目录查找 supervisord.conf 配置文件
1.$CWD/supervisord.conf
2.$CWD/etc/supervisord.conf
3./etc/supervisord.conf
4./etc/supervisor/supervisord.conf (since Supervisor 3.3.0)
5.../etc/supervisord.conf (Relative to the executable)
6.../supervisord.conf (Relative to the executable)
指定配置文件 sudo supervisord -c supervisord.conf 配置程序 增加自己的一个程序，打开 supervisord.conf 配置文件
[program:jshop] command=make run ; the program (relative uses PATH, can take args) stdout_logfile=jshop."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.gby.ai/posts/"},{"@type":"ListItem","position":2,"name":"supervisor(进程管理)小白快速上手","item":"https://www.gby.ai/supervisor/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"supervisor(进程管理)小白快速上手","name":"supervisor(进程管理)小白快速上手","description":"简介 supervisor 是用 Python 开发的一个 client/server 服务，是 Linux/Unix 系统下的一个进程管理工具。可以很方便的监听、启动、停止、重启一个或多个进程。用 supervisor 管理的进程，当一个进程意外被杀死，supervisor 监听到进程死后，会自动将它重启，很方便的做到进程自动恢复的功能，不再需要自己写 shell 脚本来控制。\n安装 sudo apt-get install supervisor 其它安装方式 使用 pip 工具\npip install supervisor 配置文件 生成 echo_supervisord_conf \u0026gt; /etc/supervisord.conf 配置文件加载顺序 默认在当前目录查找 supervisord.conf 配置文件\n1.$CWD/supervisord.conf\n2.$CWD/etc/supervisord.conf\n3./etc/supervisord.conf\n4./etc/supervisor/supervisord.conf (since Supervisor 3.3.0)\n5.../etc/supervisord.conf (Relative to the executable)\n6.../supervisord.conf (Relative to the executable)\n指定配置文件 sudo supervisord -c supervisord.conf 配置程序 增加自己的一个程序，打开 supervisord.conf 配置文件\n[program:jshop] command=make run ; the program (relative uses PATH, can take args) stdout_logfile=jshop.","keywords":[],"articleBody":"简介 supervisor 是用 Python 开发的一个 client/server 服务，是 Linux/Unix 系统下的一个进程管理工具。可以很方便的监听、启动、停止、重启一个或多个进程。用 supervisor 管理的进程，当一个进程意外被杀死，supervisor 监听到进程死后，会自动将它重启，很方便的做到进程自动恢复的功能，不再需要自己写 shell 脚本来控制。\n安装 sudo apt-get install supervisor 其它安装方式 使用 pip 工具\npip install supervisor 配置文件 生成 echo_supervisord_conf \u003e /etc/supervisord.conf 配置文件加载顺序 默认在当前目录查找 supervisord.conf 配置文件\n1.$CWD/supervisord.conf\n2.$CWD/etc/supervisord.conf\n3./etc/supervisord.conf\n4./etc/supervisor/supervisord.conf (since Supervisor 3.3.0)\n5.../etc/supervisord.conf (Relative to the executable)\n6.../supervisord.conf (Relative to the executable)\n指定配置文件 sudo supervisord -c supervisord.conf 配置程序 增加自己的一个程序，打开 supervisord.conf 配置文件\n[program:jshop] command=make run ; the program (relative uses PATH, can take args) stdout_logfile=jshop.out ; stdout log path, NONE for none; default AUTO 注意：make run 执行我项目中的 Makefile 文件\n其它常用程序配置\n; 环境变量 ;environment=A=\"1\",B=\"2\" ; process environment additions **后续学习重点：**详细的使用说明，可以打开生成的 supervisord.conf 配置文件\n运行 开始服务\n方式一\nsudo supervisord 方式二\nsudo systemctl start supervisor 开始自定义的程序\nsudo supervisorctl start all sudo supervisorctl start [自己配置的名称] 状态\nsudo supervisorctl status all 停止\nsudo supervisorctl stop all suod supervisorctl stop [自己配置的名称] 停止 supervisord 服务 方式一\nnetstat -anp|grep super sudo kill [进程id] 方式二\nsudo systemctl stop supervisor 如果停止后，重新启动服务，出错\nError: Another program is already listening on a port that one of our HTTP servers is configured to use. Shut this program down first before starting supervisord. 解决办法：\nsudo unlink /var/run/supervisor.sock sudo unlink /tmp/supervisor.sock 注：以上两种 unlink，选择自己 supervisor.sock 所在的位置\n总结 以上在 supervisor 使用的过程中，还有其它使用方式，更详细的去往 官网\n","wordCount":"191","inLanguage":"zh","datePublished":"2019-07-12T09:58:16+08:00","dateModified":"2019-07-12T09:58:16+08:00","author":[{"@type":"Person","name":"Evan Miao"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.gby.ai/supervisor/"},"publisher":{"@type":"Organization","name":"PrintLove","logo":{"@type":"ImageObject","url":"https://www.gby.ai/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.gby.ai/ accesskey=h title="PrintLove (Alt + H)">PrintLove</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.gby.ai/archives title=文章><span>文章</span></a></li><li><a href=https://www.gby.ai/series title=系列><span>系列</span></a></li><li><a href=https://www.gby.ai/sponsor title=赞助><span>赞助</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>supervisor(进程管理)小白快速上手</h1><div class=post-meta><span title='2019-07-12 09:58:16 +0800 CST'>2019-07-12</span>&nbsp;·&nbsp;Evan Miao&nbsp;|&nbsp;<a href=https://github.com/miaogaolin/workspace-obisidian-publisher/tree/main/content/posts/supervisor%28%e8%bf%9b%e7%a8%8b%e7%ae%a1%e7%90%86%29%e5%b0%8f%e7%99%bd%e5%bf%ab%e9%80%9f%e4%b8%8a%e6%89%8b.md rel="noopener noreferrer" target=_blank>指出问题</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#简介>简介</a></li><li><a href=#安装>安装</a><ul><li><a href=#其它安装方式>其它安装方式</a></li></ul></li><li><a href=#配置文件>配置文件</a><ul><li><a href=#生成>生成</a></li><li><a href=#配置文件加载顺序>配置文件加载顺序</a></li><li><a href=#指定配置文件>指定配置文件</a></li><li><a href=#配置程序>配置程序</a></li></ul></li><li><a href=#运行>运行</a></li><li><a href=#停止-supervisord-服务>停止 supervisord 服务</a></li><li><a href=#总结>总结</a></li></ul></nav></div></details></div><div class=post-content><h2 id=简介>简介<a hidden class=anchor aria-hidden=true href=#简介>#</a></h2><p>supervisor 是用 Python 开发的一个 client/server 服务，是 Linux/Unix 系统下的一个进程管理工具。可以很方便的监听、启动、停止、重启一个或多个进程。用 supervisor 管理的进程，当一个进程意外被杀死，supervisor 监听到进程死后，会自动将它重启，很方便的做到进程自动恢复的功能，不再需要自己写 shell 脚本来控制。</p><h2 id=安装>安装<a hidden class=anchor aria-hidden=true href=#安装>#</a></h2><pre tabindex=0><code>sudo apt-get install supervisor  
</code></pre><h3 id=其它安装方式>其它安装方式<a hidden class=anchor aria-hidden=true href=#其它安装方式>#</a></h3><p>使用 pip 工具</p><pre tabindex=0><code>pip install supervisor  
</code></pre><h2 id=配置文件>配置文件<a hidden class=anchor aria-hidden=true href=#配置文件>#</a></h2><h3 id=生成>生成<a hidden class=anchor aria-hidden=true href=#生成>#</a></h3><pre tabindex=0><code>echo_supervisord_conf &gt; /etc/supervisord.conf  
</code></pre><h3 id=配置文件加载顺序>配置文件加载顺序<a hidden class=anchor aria-hidden=true href=#配置文件加载顺序>#</a></h3><p>默认在当前目录查找 <code>supervisord.conf</code> 配置文件</p><p>1.<code>$CWD/supervisord.conf</code><br>2.<code>$CWD/etc/supervisord.conf</code><br>3.<code>/etc/supervisord.conf</code><br>4.<code>/etc/supervisor/supervisord.conf (since Supervisor 3.3.0)</code><br>5.<code>../etc/supervisord.conf (Relative to the executable)</code><br>6.<code>../supervisord.conf (Relative to the executable)</code></p><h3 id=指定配置文件>指定配置文件<a hidden class=anchor aria-hidden=true href=#指定配置文件>#</a></h3><pre tabindex=0><code>sudo supervisord -c  supervisord.conf  
</code></pre><h3 id=配置程序>配置程序<a hidden class=anchor aria-hidden=true href=#配置程序>#</a></h3><p>增加自己的一个程序，打开 <code>supervisord.conf</code> 配置文件</p><pre tabindex=0><code>[program:jshop]  
command=make run              ; the program (relative uses PATH, can take args)  
stdout_logfile=jshop.out      ; stdout log path, NONE for none; default AUTO  
</code></pre><p>注意：<code>make run</code> 执行我项目中的 Makefile 文件<br>其它常用程序配置</p><pre tabindex=0><code>; 环境变量  
;environment=A=&#34;1&#34;,B=&#34;2&#34;       ; process environment additions  
</code></pre><p>**后续学习重点：**详细的使用说明，可以打开生成的 <code>supervisord.conf</code> 配置文件</p><h2 id=运行>运行<a hidden class=anchor aria-hidden=true href=#运行>#</a></h2><p>开始服务<br>方式一</p><pre tabindex=0><code>sudo supervisord  
</code></pre><p>方式二</p><pre tabindex=0><code>sudo systemctl  start supervisor  
</code></pre><p>开始自定义的程序</p><pre tabindex=0><code>sudo supervisorctl start all  
sudo supervisorctl start [自己配置的名称]  
</code></pre><p>状态</p><pre tabindex=0><code>sudo supervisorctl status all  
</code></pre><p>停止</p><pre tabindex=0><code>sudo supervisorctl stop all  
suod supervisorctl stop [自己配置的名称]  
</code></pre><h2 id=停止-supervisord-服务>停止 supervisord 服务<a hidden class=anchor aria-hidden=true href=#停止-supervisord-服务>#</a></h2><p>方式一</p><pre tabindex=0><code>netstat -anp|grep super  
sudo kill [进程id]  
</code></pre><p>方式二</p><pre tabindex=0><code>sudo systemctl stop supervisor  
</code></pre><p>如果停止后，重新启动服务，出错</p><p><code>Error: Another program is already listening on a port that one of our HTTP servers is configured to use. Shut this program down first before starting supervisord.</code><br>解决办法：</p><pre tabindex=0><code>sudo unlink /var/run/supervisor.sock  
sudo unlink /tmp/supervisor.sock  
</code></pre><p>注：以上两种 unlink，选择自己 <code>supervisor.sock</code> 所在的位置</p><h2 id=总结>总结<a hidden class=anchor aria-hidden=true href=#总结>#</a></h2><p>以上在 supervisor 使用的过程中，还有其它使用方式，更详细的去往 <a href=%5Bhttp://www.supervisord.org/installing.html%5D(http://www.supervisord.org/installing.html)>官网</a></p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://www.gby.ai/docker-cgroup/><span class=title>« 上一页</span><br><span>Docker的cgroup讲解</span></a>
<a class=next href=https://www.gby.ai/windows-docker/><span class=title>下一页 »</span><br><span>Windows 安装 Docker 并简单使用</span></a></nav><div class=comment-head>评论 & Email：</div><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share supervisor(进程管理)小白快速上手 on x" href="https://x.com/intent/tweet/?text=@laomiao_ supervisor%28%e8%bf%9b%e7%a8%8b%e7%ae%a1%e7%90%86%29%e5%b0%8f%e7%99%bd%e5%bf%ab%e9%80%9f%e4%b8%8a%e6%89%8b&amp;url=https%3a%2f%2fwww.gby.ai%2fsupervisor%2f&amp;hashtags="><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 50 50" fill="currentcolor"><path d="M5.9199219 6 20.582031 27.375 6.2304688 44H9.4101562L21.986328 29.421875 31.986328 44H44L28.681641 21.669922 42.199219 6H39.029297L27.275391 19.617188 17.933594 6H5.9199219zm3.796875 2H16.880859L40.203125 42H33.039062L9.7167969 8z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share supervisor(进程管理)小白快速上手 on email" href="mailto:mglluoye@gmail.com?subject=supervisor%28%e8%bf%9b%e7%a8%8b%e7%ae%a1%e7%90%86%29%e5%b0%8f%e7%99%bd%e5%bf%ab%e9%80%9f%e4%b8%8a%e6%89%8b"><svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 12C2 7.28595 2 4.92893 3.46447 3.46447 4.92893 2 7.28595 2 12 2c4.714.0 7.0711.0 8.5355 1.46447C22 4.92893 22 7.28595 22 12c0 4.714.0 7.0711-1.4645 8.5355C19.0711 22 16.714 22 12 22c-4.71405.0-7.07107.0-8.53553-1.4645C2 19.0711 2 16.714 2 12z" stroke="currentcolor" stroke-width="1.5"/><path d="M2 13H5.16026c.90517.0 1.35776.0 1.75558.183.39783.1829.69237.5266 1.28145 1.2138L8.80271 15.1032C9.39179 15.7904 9.68633 16.1341 10.0842 16.317 10.482 16.5 10.9346 16.5 11.8397 16.5H12.1603C13.0654 16.5 13.518 16.5 13.9158 16.317 14.3137 16.1341 14.6082 15.7904 15.1973 15.1032L15.8027 14.3968C16.3918 13.7096 16.6863 13.3659 17.0842 13.183 17.482 13 17.9346 13 18.8397 13H22" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/><path d="M8 7h8" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/><path d="M10 10.5h4" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/></svg></a></div></footer></article></main><footer class=footer><span>Content under license <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>